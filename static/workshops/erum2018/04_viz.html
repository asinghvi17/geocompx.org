<!DOCTYPE html>
<html>
  <head>
    <title>Tutorial: Making maps with R</title>
    <meta charset="utf-8">
    <meta name="author" content="Jannes Muenchow, Robin Lovelace" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <script src="libs/leaflet-providers/leaflet-providers.js"></script>
    <script src="libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
    <script src="libs/mapPane/map-pane.js"></script>
    <link href="libs/HomeButton/home-button.css" rel="stylesheet" />
    <script src="libs/HomeButton/home-button.js"></script>
    <script src="libs/HomeButton/easy-button-src.min.js"></script>
    <link href="libs/PopupTable/popup.css" rel="stylesheet" />
    <link rel="stylesheet" href="my-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Tutorial: Making maps with R
## ðŸ—º <br/>from base (rock) to shiny (clouds)
### Jannes Muenchow, Robin Lovelace
### eRum Budapest, 2018-05-14

---





layout: true
background-image: url(img/r_geocomp_background.png)
background-size: cover

---

# A brief history of geographic vizualisation I

- Neo Babylonian (626 BC - 539 BC) temple plan
Source:
(Talbert, 2014)

&lt;img src="img/neo-babylon-temple-map-circa-600-bc.png" width="50%" /&gt;

---

# A brief history of geographic vizualisation II

- Neo Babylonian (626 BC - 539 BC) map of the world
Source:
(Talbert, 2014)

&lt;img src="img/babylon-map.png" width="50%" /&gt;

---

# A brief history of geographic vizualisation III

- Humboldt's NaturgemÃ¤lde (1807, *Geography of Plants*)

![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Zentralbibliothek_Z%C3%BCrich_-_Ideen_zu_einer_Geographie_der_Pflanzen_nebst_einem_Naturgem%C3%A4lde_der_Tropenl%C3%A4nder_-_000012142.jpg/2560px-Zentralbibliothek_Z%C3%BCrich_-_Ideen_zu_einer_Geographie_der_Pflanzen_nebst_einem_Naturgem%C3%A4lde_der_Tropenl%C3%A4nder_-_000012142.jpg)&lt;!-- --&gt;


&lt;!-- - The mappa mundi - largest Mediaval map surviving (~1300 **AD**) --&gt;
&lt;!-- knitr::include_graphics("https://upload.wikimedia.org/wikipedia/commons/4/48/Hereford-Karte.jpg?download") --&gt;

---

# A brief history of geographic data viz in R

"The core R engine was not designed specifically for the display and analysis
of maps, and the limited interactive facilities it offers have drawbacks in this
area" (Bivand, Pebesma, and GÃ³mez-Rubio, 2013).

--

Five years later...

--

"An example showing R's flexibility and evolving geographic capabilities is **leaflet**
(Cheng, Karambelkar, and Xie, 2018),
a package for making interactive maps that has been extended by the R community, as we'll see in Chapter 9" 
(Lovelace, Nowosad, and Meunchow, 2018).

---

# R's 'base' graphics: sp



![](04_viz_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;

---

# Base R graphics: sp code

Credit: [asdar-book.org/](http://asdar-book.org/), reproducible code accompanying the book Applied Spatial Data Analysis with R (Pebesma et al. 2013).


```r
library(sp)
library(spData)
nz_sp = as(nz, "Spatial")
plot(nz_height_sp, cex = 2)
title("points")
plot(nz_sp, col = "grey")
plot(nz_height, add = TRUE, col = "red")
```

--

## Observations

- Passes arguments (e.g `cex` for symbol size) to `graphics::plot()`
- New command for each additional 'layer' (e.g. `title()`, `plot(..., add = TRUE)`)
- Black and white default output style
- Fast

---

# Base R graphics: sf 


```r
plot(nz)
```

![](04_viz_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

---

# Base R graphics: sf II


```r
plot(st_geometry(nz))
plot(nz_height, add = TRUE)
```

```
## Warning in plot.sf(nz_height, add = TRUE): ignoring all but the first
## attribute
```

```r
sf_cols = sf.colors(n = 2, alpha = 0.2)
nz$col = factor(x = nz$Island, labels = sf_cols)
plot(st_geometry(nz), col = as.character(nz$col))
```

&lt;div class="figure"&gt;
&lt;img src="04_viz_files/figure-html/unnamed-chunk-8-1.png" alt=" " width="40%" /&gt;&lt;img src="04_viz_files/figure-html/unnamed-chunk-8-2.png" alt=" " width="40%" /&gt;
&lt;p class="caption"&gt; &lt;/p&gt;
&lt;/div&gt;

---

# sf graphics: code


```r
# facet plots by default
plot(nz) 
# plot just geometry, ready for new layers:
plot(st_geometry(nz), reset = FALSE)
# addition of new layers
plot(nz_height, add = TRUE)
# transparency
sf_cols = sf.colors(n = 2, alpha = 0.2)
nz$col = factor(x = nz$Island, labels = sf_cols)
plot(st_geometry(nz), col = as.character(nz$col))
#  see ?plot.sf for more
```

--

## Observations

- Facets by default: useful for seeing patterns.
- Transparency new, `add = ...` argument the sam.e
- You can go far with base R graphics 
(Murrell, 2016).

---

# tmap

- A diverse dedicated mapping R package


```r
library(tmap)
tm_shape(nz) +
  tm_polygons("Median_income", palette = "RdYlBu")
```

![](04_viz_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---

# Why tmap?

- It is powerful and flexible.
- Concise syntax, attractive maps with minimal code, familiar to **ggplot2** users.
- Unique capability: same code -&gt; static + interactive maps with switch `tmap_mode()`.
- Wide range of spatial classes (including `raster` objects) supported.
- Well documented + developed --- see [`tmap-nutshell`](https://cran.r-project.org/web/packages/tmap/vignettes/tmap-nutshell.html) and JSS paper
(Tennekes, 2018).


--

- It's also at eRum!
- At 13:30 in room N15 203: "Plotting spatial data in R".

---

# tmap basics


```r
# Add fill layer to nz shape
tm_shape(nz) + tm_fill() 
# Add border layer to nz shape
tm_shape(nz) + tm_borders() 
# Add fill and border layers to nz shape
tm_shape(nz) + tm_fill() + tm_borders() 
```

&lt;div class="figure"&gt;
&lt;img src="04_viz_files/figure-html/unnamed-chunk-11-1.png" alt="tmap basics" width="32%" /&gt;&lt;img src="04_viz_files/figure-html/unnamed-chunk-11-2.png" alt="tmap basics" width="32%" /&gt;&lt;img src="04_viz_files/figure-html/unnamed-chunk-11-3.png" alt="tmap basics" width="32%" /&gt;
&lt;p class="caption"&gt;tmap basics&lt;/p&gt;
&lt;/div&gt;

&lt;!-- --- --&gt;

&lt;!-- # tmap objects --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Aesthetics --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Layouts --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Facets --&gt;

&lt;!-- --- --&gt;

---

# Animations

- Are easy with **tmap** (section [9.3](http://geocompr.robinlovelace.net/adv-map.html#animated-maps) of geocompr)

&lt;img src="https://user-images.githubusercontent.com/1825120/38543030-5794b6f0-3c9b-11e8-9da9-10ec1f3ea726.gif" width="80%" /&gt;

---

# Interactive maps with mapview


```r
m = mapview::mapview(nz)
m@map
```

<div id="htmlwidget-c64406363400f876b48d" style="width:504px;height:504px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-c64406363400f876b48d">{"x":{"options":{"minZoom":1,"maxZoom":100,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",1,"CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter",2,"CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",3,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",4,"Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenTopoMap",5,"OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[174.616638800656,174.562809050564,174.481748333157,174.338965900234,174.214573266902,174.128772750479,174.045997583891,174.095972133855,174.155368483074,174.181866683395,174.135350500256,174.040527550541,173.983675883808,173.86604691657,173.688098133553,173.365180583183,173.356613017331,173.054243634031,173.130559999733,173.168093182624,173.167447217184,173.081005749918,172.851222917828,172.653880649817,172.69995103369,172.793065450767,172.869035233581,173.014442316542,172.984791449998,173.025130983722,173.120204417268,173.199324916413,173.280772883247,173.214814899913,173.288398249192,173.340087699738,173.286914883417,173.429163483407,173.389709633848,173.43403079967,173.535566349955,173.562634800269,173.644032483283,173.701142200014,173.74008500064,173.841272884062,173.931277716701,173.963284550175,174.078539632729,174.079958382619,174.125462949978,174.28978491699,174.350169531639,174.339655300127,174.468392016881,174.474719383801,174.536753999552,174.50237205005,174.557601466643,174.555188500026,174.485563450384,174.42268665044,174.404830266529,174.500809283377,174.460144966703,174.510000500399,174.589780900475,174.616638800656],"lat":[-36.1175604665931,-36.1790001827569,-36.2282769999411,-36.3168297168814,-36.2587116660842,-36.1736123994487,-36.1701695501245,-36.2448879334642,-36.2760972327256,-36.3630358998114,-36.3920499169095,-36.3928830666096,-36.2337049996773,-36.0912001162441,-35.8924174497112,-35.5474016995122,-35.5228177334182,-35.1912381663484,-35.1789323328505,-35.1364273327493,-35.0363686494584,-34.8923919496606,-34.6297133663182,-34.4780076502037,-34.4263823994855,-34.4539942827601,-34.4145187168343,-34.4241368998054,-34.5278073326595,-34.6535190997575,-34.81668376714,-34.870968849818,-34.8925261172536,-34.9612557667465,-35.0132316332065,-34.9582312164506,-34.8634985660914,-34.8251486160696,-34.9534963329236,-34.9859361497159,-34.9984530665273,-34.921567966528,-34.9661940829229,-34.9524767161151,-35.0372064834482,-34.9943093161935,-35.0472986498438,-35.1188625998023,-35.1161315001253,-35.2730977500874,-35.2940340332248,-35.2751480001439,-35.3264187489317,-35.3768799004023,-35.490753766877,-35.5563464661221,-35.5876817834851,-35.6408338001947,-35.7240167331044,-35.8608910000564,-35.786374216361,-35.784832099836,-35.8310155171749,-35.8410631829848,-35.9145349498182,-36.0304654495667,-36.0481898660492,-36.1175604665931]}]],[[{"lng":[175.291304133085,175.152091033439,175.141120333576,175.048242617196,174.990258082555,174.868951232796,174.815488049849,174.659628367495,174.538637882794,174.627048466479,174.690634167279,174.73950153409,174.857652450143,174.826874817006,174.744100215986,174.681552100084,174.583827667051,174.48303651745,174.468611433661,174.424401866458,174.273615083721,174.16870360025,174.187919333768,174.235835399823,174.312745950162,174.404776383887,174.43132198402,174.414885550516,174.25745998445,174.257569883856,174.373455166346,174.481748333157,174.562809050564,174.616638800656,174.657346033553,174.745751216322,174.818184083076,174.734791817454,174.723020317237,174.6928154505,174.740610167352,174.775982149355,174.735215883483,174.880847016882,174.95133831739,175.055796349565,175.093513100132,175.194032000506,175.28332898404,175.291304133085],"lat":[-37.0240384665172,-37.0215583499183,-37.175603383291,-37.1822711996281,-37.2165854996348,-37.2449866002391,-37.2286308828648,-37.2924320832073,-37.0766324001782,-37.0367340832541,-37.1366490000563,-37.1262254668378,-37.0510942830302,-37.0129061168963,-36.9843338828504,-36.9338147160346,-37.0073111163499,-37.0480030494167,-36.9540757993866,-36.8242195164721,-36.6113436505545,-36.4944308500355,-36.4344940164907,-36.4280906168391,-36.5364925994457,-36.6242364999802,-36.5110054662043,-36.4036616161859,-36.3809034491112,-36.3259556823754,-36.3194753664587,-36.2282769999411,-36.1790001827569,-36.1175604665931,-36.1775323830102,-36.2569215827706,-36.2852678662079,-36.4030681168164,-36.5128217502045,-36.5757347661745,-36.6480035493648,-36.7735064498795,-36.8411249497158,-36.8523293329412,-36.8953845498422,-36.882600599391,-36.9457113831059,-36.934308932921,-36.9885057501472,-37.0240384665172]}],[{"lng":[175.397381334664,175.42270826654,175.48369956673,175.479485900625,175.5432121837,175.525421999774,175.437765849463,175.433490317009,175.350243184351,175.364852117959,175.326193733308,175.341795483261,175.397381334664],"lat":[-36.0497132993229,-36.1291887990059,-36.1921515500045,-36.2444036833781,-36.2952009834002,-36.3476168495328,-36.3075231663546,-36.2724128496224,-36.228536449767,-36.182237616875,-36.138272981851,-36.0685923493946,-36.0497132993229]}],[{"lng":[175.172594933364,175.14511235048,175.066499350382,175.038030716822,175.172594933364],"lat":[-36.7386591493628,-36.8474120331354,-36.8337360501076,-36.7957700665624,-36.7386591493628]}]],[[{"lng":[175.940104000404,175.913492216935,175.832775867558,175.809667417205,175.833586717065,175.927714949317,175.905873816583,175.97718783329,175.940945834189,176.075603717482,176.076019150589,176.150334834187,176.232057866463,176.297547798202,176.390623467124,176.429143533873,176.505324767157,176.450980499877,176.255113766944,176.25838093416,176.257562950888,176.147549683454,176.172753900527,176.085669116788,175.989206866079,175.96436554996,175.885970716459,175.81256880052,175.669211766575,175.557854216472,175.634656366175,175.617972132813,175.682012417338,175.562633650262,175.579969833543,175.546438183897,175.574620149734,175.523386533046,175.632458999384,175.612185166049,175.480939533802,175.383212017291,175.317760016592,175.213231183619,175.10922668413,174.954390867085,174.937845033609,174.862896367393,174.791960217277,174.655191183282,174.615147466571,174.64557498284,174.634641616934,174.715704749268,174.712538232634,174.690774649571,174.777037133266,174.895569600305,174.874875616366,174.77780156729,174.792085916113,174.75679855049,174.843696184123,174.956284466653,174.951308116722,174.837134500703,174.768715216871,174.700024633059,174.659628367495,174.815488049849,174.868951232796,174.990258082555,175.048242617196,175.141120333576,175.152091033439,175.291304133085,175.294966566687,175.323006283065,175.3992043827,175.544902117386,175.514084716697,175.519742083219,175.491002617547,175.408398483484,175.490180517217,175.494676733872,175.429445151764,175.447073067326,175.405834634533,175.344544616922,175.328268300532,175.36819123307,175.520191916267,175.522613315882,175.583391316677,175.578198899777,175.646650566193,175.788850933098,175.708633783134,175.78130515032,175.856004517198,175.842233483927,175.888322383074,175.878370950751,175.940104000404],"lat":[-37.3732415493795,-37.4255867167681,-37.4716019831595,-37.5138131497333,-37.6274871173195,-37.7760034327579,-37.8285516669453,-37.9136730327822,-37.929422499792,-38.0495643996454,-38.1214420994107,-38.2181863994961,-38.2390825826552,-38.2295556169363,-38.3230470167692,-38.3134151167029,-38.4022137992992,-38.5616572327478,-38.8081781832656,-38.8899908831226,-38.9478759665031,-39.0376737001404,-39.0784858666215,-39.1294486168462,-39.11554808317,-39.1798030167947,-39.2058951834786,-39.3003262164755,-39.2969341494137,-39.2759983494818,-39.1583628832729,-39.0812491668439,-38.9797105002169,-38.986829699848,-38.9106842496516,-38.8598730996322,-38.8163002497041,-38.750091966835,-38.5917750671975,-38.4876116161861,-38.478880750128,-38.542295983231,-38.5560422670079,-38.6393990331454,-38.6245203666478,-38.6675035326548,-38.7501585666532,-38.7745840666622,-38.7317766330023,-38.7332825998921,-38.7066484493564,-38.4563665331151,-38.3871955160275,-38.3065037997069,-38.2005980662173,-38.1176242502238,-38.1325016493274,-38.0859713163665,-38.0485370834827,-38.0815316832065,-38.0072839664253,-37.8638128167999,-37.8039134660842,-37.7924118832134,-37.7515311835327,-37.7936627827116,-37.5608502999349,-37.4167737834823,-37.2924320832073,-37.2286308828648,-37.2449866002391,-37.2165854996348,-37.1822711996281,-37.175603383291,-37.0215583499183,-37.0240384665172,-37.1211146497524,-37.1906320164282,-37.2270412666345,-37.1573665495214,-37.0930035993838,-37.0341053993446,-36.9622664333688,-36.857511400251,-36.8083106669846,-36.7619687494618,-36.7001410820276,-36.6600482663062,-36.580563183098,-36.5530231170595,-36.4808005320916,-36.4685975823769,-36.5407973488788,-36.5918639497124,-36.6272173993718,-36.6802999496706,-36.7363723666233,-36.7041192832818,-36.8325179663713,-36.8224126992097,-36.9228085834167,-36.9474531172303,-37.0391867663686,-37.2003710496673,-37.3732415493795]}]],[[{"lng":[178.085284050728,178.107554900656,177.986683351023,177.996621683506,178.073006950406,177.972291633859,177.860967450149,177.739984233557,177.692067683864,177.604788567261,177.499270867144,177.463687900819,177.236922317683,177.257394033283,177.122170799827,177.045979500377,176.991448066662,176.87866763316,176.766746733651,176.717283066468,176.695970650021,176.601167800205,176.520452884071,176.468164783255,176.382140266511,176.303565400194,176.25838093416,176.255113766944,176.450980499877,176.505324767157,176.429143533873,176.390623467124,176.297547798202,176.232057866463,176.150334834187,176.076019150589,176.075603717482,175.940945834189,175.97718783329,175.905873816583,175.927714949317,175.833586717065,175.809667417205,175.832775867558,175.913492216935,175.940104000404,175.963443900663,175.93480529982,175.975048966786,176.053118300075,176.186754767108,176.250032000857,176.419017433436,176.477600450903,176.601950900424,176.736143750078,176.931668933866,177.083869783406,177.160565467584,177.383685833914,177.487534484142,177.5467901337,177.619619200774,177.683952433749,177.727635733791,177.868536417845,177.958640534434,178.006622349832,178.085284050728],"lat":[-37.5423911653952,-37.5987159651277,-37.6087571325392,-37.7602764990791,-37.7635896985385,-37.8450054654632,-38.1116561657724,-38.0420469662422,-38.1082775994784,-38.1866207660274,-38.2184667490582,-38.3335362661665,-38.4263417993583,-38.5082771658461,-38.5839209332306,-38.6208022327955,-38.693694583043,-38.6671346491991,-38.689309683067,-38.7245242994195,-38.8215917661477,-38.825559132932,-38.7968662995226,-38.9415194660224,-38.9887032828112,-38.9017194499202,-38.8899908831226,-38.8081781832656,-38.5616572327478,-38.4022137992992,-38.3134151167029,-38.3230470167692,-38.2295556169363,-38.2390825826552,-38.2181863994961,-38.1214420994107,-38.0495643996454,-37.929422499792,-37.9136730327822,-37.8285516669453,-37.7760034327579,-37.6274871173195,-37.5138131497333,-37.4716019831595,-37.4255867167681,-37.3732415493795,-37.4333808167205,-37.5368533661666,-37.6239334661018,-37.6595265664723,-37.634790017279,-37.6800395995794,-37.7484934665627,-37.7541410499537,-37.8295142667608,-37.8795955829941,-37.9168966999474,-37.9788140826354,-37.9898454662543,-37.9836964661637,-37.9495595659166,-37.9075796825578,-37.8107282995693,-37.7601537155194,-37.6801879490526,-37.6533825659818,-37.6053283322934,-37.5531278659688,-37.5423911653952]}]],[[{"lng":[177.898992867322,177.834796917381,177.799025000975,177.660163933681,177.660490067302,177.597522800508,177.49421208424,177.447906750195,177.353425167645,177.307560650033,177.122170799827,177.257394033283,177.236922317683,177.463687900819,177.499270867144,177.604788567261,177.692067683864,177.739984233557,177.860967450149,177.972291633859,178.073006950406,177.996621683506,177.986683351023,178.107554900656,178.085284050728,178.174634083746,178.276301851602,178.363710601162,178.482593484053,178.550373600413,178.415858017631,178.391299368031,178.337261951072,178.373593883376,178.321955168218,178.338370117511,178.312409501413,178.344519151294,178.281772317114,178.293040667099,178.198843133985,178.050040402505,177.972729617199,177.911783384436,177.898992867322],"lat":[-38.9718330659402,-38.9527794154328,-38.8943902994202,-38.9047009160675,-38.8489419157559,-38.8070414992073,-38.7779742826049,-38.6359438824164,-38.6245578660679,-38.659704199614,-38.5839209332306,-38.5082771658461,-38.4263417993583,-38.3335362661665,-38.2184667490582,-38.1866207660274,-38.1082775994784,-38.0420469662422,-38.1116561657724,-37.8450054654632,-37.7635896985385,-37.7602764990791,-37.6087571325392,-37.5987159651277,-37.5423911653952,-37.5346582985723,-37.5544868652179,-37.6310041980111,-37.6410965144209,-37.6920842484305,-37.8580439155172,-37.9613996652351,-38.0095467654096,-38.0944882317616,-38.1221914152638,-38.1917070816724,-38.2415486150003,-38.4184646319201,-38.4721755149837,-38.5269283319884,-38.6055091147978,-38.7020828317471,-38.6812606823481,-38.8279248659345,-38.9718330659402]}]],[[{"lng":[177.898992867322,177.901799650219,178.001674400697,177.924318566661,177.906174350275,177.850842016855,177.839268633525,177.870901817579,177.755965216565,177.636631149881,177.421363584153,177.259161701129,177.046117517326,176.989527483471,176.919394050427,176.876375366274,176.92417755026,176.922247883049,176.966353650084,177.075499034874,177.011022417483,177.005106232773,176.932128366633,176.888223216891,176.868997500466,176.794396933421,176.687031283282,176.622569049879,176.44329526638,176.359488317331,176.378605866561,176.323214066837,176.204970833785,176.136627349808,176.093831400639,176.106847067352,176.176852599749,176.195937933827,176.142726417603,176.183756817499,176.136827417622,176.111859467522,176.121760383432,176.080882450312,176.115201750033,176.085669116788,176.172753900527,176.147549683454,176.257562950888,176.25838093416,176.303565400194,176.382140266511,176.468164783255,176.520452884071,176.601167800205,176.695970650021,176.717283066468,176.766746733651,176.87866763316,176.991448066662,177.045979500377,177.122170799827,177.307560650033,177.353425167645,177.447906750195,177.49421208424,177.597522800508,177.660490067302,177.660163933681,177.799025000975,177.834796917381,177.898992867322],"lat":[-38.9718330659402,-39.0729589155023,-39.1049364824401,-39.1701287656029,-39.2262764647389,-39.2334497985144,-39.1523278981441,-39.0876976326241,-39.0586759157535,-39.0504614660947,-39.0626328989449,-39.1006631827984,-39.193936749739,-39.294002783693,-39.3400230828642,-39.4226607993692,-39.4759893488304,-39.549583649216,-39.6235120824413,-39.6732594152758,-39.7427146829718,-39.8359419163268,-39.9352899662693,-40.0255260159481,-40.1313829663584,-40.2053349995806,-40.2563932326417,-40.4280165160345,-40.4073888329473,-40.1971025164432,-40.1581407166381,-40.0937170161921,-40.0189951167237,-40.0285781338199,-39.9955025832323,-39.9172052496743,-39.7440490994983,-39.6635709665703,-39.584682783093,-39.5389751330716,-39.4752775332614,-39.3849908334062,-39.3263642668049,-39.2591636993616,-39.2176892164469,-39.1294486168462,-39.0784858666215,-39.0376737001404,-38.9478759665031,-38.8899908831226,-38.9017194499202,-38.9887032828112,-38.9415194660224,-38.7968662995226,-38.825559132932,-38.8215917661477,-38.7245242994195,-38.689309683067,-38.6671346491991,-38.693694583043,-38.6208022327955,-38.5839209332306,-38.659704199614,-38.6245578660679,-38.6359438824164,-38.7779742826049,-38.8070414992073,-38.8489419157559,-38.9047009160675,-38.8943902994202,-38.9527794154328,-38.9718330659402]}]],[[{"lng":[174.615147466571,174.655191183282,174.791960217277,174.862896367393,174.819869750297,174.798771383129,174.82803073341,174.764415417466,174.788411450134,174.675169549981,174.755642432479,174.747802983227,174.891668949943,174.871353583229,174.928495867377,174.967386967073,174.972628816641,174.930618333552,174.784081849931,174.716569950035,174.558874867369,174.444514817259,174.352709617041,174.201535516873,174.076819100748,173.910845583182,173.794988949217,173.75158500083,173.794817016681,173.909613299173,174.088957305084,174.200815833298,174.390964834124,174.559947483204,174.615147466571],"lat":[-38.7066484493564,-38.7332825998921,-38.7317766330023,-38.7745840666622,-38.7875171166264,-38.8652667999868,-38.9237043663331,-39.0047909500156,-39.0678331830497,-39.1298299493575,-39.2336436334958,-39.275799016305,-39.3582403665597,-39.4010654665755,-39.4761503161921,-39.4862796832709,-39.6531461001073,-39.7244787998992,-39.8579774497761,-39.8672062167726,-39.8174444664465,-39.7506608664393,-39.6590780832903,-39.5880837831519,-39.577339966687,-39.5148036332182,-39.4150641328021,-39.2803068998566,-39.1924945673089,-39.1211085998919,-39.0509301723833,-38.9883909501815,-38.988858083009,-38.8559135835186,-38.7066484493564]}]],[[{"lng":[176.085669116788,176.115201750033,176.080882450312,176.121760383432,176.111859467522,176.136827417622,176.183756817499,176.142726417603,176.195937933827,176.176852599749,176.106847067352,176.093831400639,176.136627349808,176.204970833785,176.323214066837,176.378605866561,176.359488317331,176.44329526638,176.622569049879,176.620793584036,176.493457017505,176.332762533486,176.211253483369,176.0823341834,176.022449299869,175.871636834195,175.764739183997,175.77010965014,175.690650115948,175.653222466794,175.473443566666,175.439643550552,175.371593716648,175.266658932695,175.136486700712,175.190707066476,175.227057750243,175.223560650608,175.198135366129,175.162540683897,175.045463016742,174.927877449905,174.784081849931,174.930618333552,174.972628816641,174.967386967073,174.928495867377,174.871353583229,174.891668949943,174.747802983227,174.755642432479,174.675169549981,174.788411450134,174.764415417466,174.82803073341,174.798771383129,174.819869750297,174.862896367393,174.937845033609,174.954390867085,175.10922668413,175.213231183619,175.317760016592,175.383212017291,175.480939533802,175.612185166049,175.632458999384,175.523386533046,175.574620149734,175.546438183897,175.579969833543,175.562633650262,175.682012417338,175.617972132813,175.634656366175,175.557854216472,175.669211766575,175.81256880052,175.885970716459,175.96436554996,175.989206866079,176.085669116788],"lat":[-39.1294486168462,-39.2176892164469,-39.2591636993616,-39.3263642668049,-39.3849908334062,-39.4752775332614,-39.5389751330716,-39.584682783093,-39.6635709665703,-39.7440490994983,-39.9172052496743,-39.9955025832323,-40.0285781338199,-40.0189951167237,-40.0937170161921,-40.1581407166381,-40.1971025164432,-40.4073888329473,-40.4280165160345,-40.4917772328785,-40.5305003326431,-40.6979007993168,-40.659210282768,-40.7081527159945,-40.7114886668177,-40.7779047333065,-40.7680905666746,-40.6988883998071,-40.6965623329528,-40.7424894826732,-40.6933970997204,-40.7441521327034,-40.7268607829925,-40.7686105330731,-40.7003334997973,-40.5669227160378,-40.3980753833572,-40.2930346163099,-40.1765422327651,-40.1071686333906,-39.9854570661082,-39.8993730493272,-39.8579774497761,-39.7244787998992,-39.6531461001073,-39.4862796832709,-39.4761503161921,-39.4010654665755,-39.3582403665597,-39.275799016305,-39.2336436334958,-39.1298299493575,-39.0678331830497,-39.0047909500156,-38.9237043663331,-38.8652667999868,-38.7875171166264,-38.7745840666622,-38.7501585666532,-38.6675035326548,-38.6245203666478,-38.6393990331454,-38.5560422670079,-38.542295983231,-38.478880750128,-38.4876116161861,-38.5917750671975,-38.750091966835,-38.8163002497041,-38.8598730996322,-38.9106842496516,-38.986829699848,-38.9797105002169,-39.0812491668439,-39.1583628832729,-39.2759983494818,-39.2969341494137,-39.3003262164755,-39.2058951834786,-39.1798030167947,-39.11554808317,-39.1294486168462]}]],[[{"lng":[176.332762533486,176.26722840018,176.224487017581,176.154899234063,176.10692563345,176.062479416918,176.003310849803,175.961835883779,175.899294816757,175.811865650044,175.675583900734,175.585185949959,175.533100033117,175.433381416302,175.325406533484,175.236423100173,175.195284183578,175.216735033403,175.043268483566,174.924173882771,174.847847867082,174.912076183578,174.844356367019,174.785921437228,174.839045832862,174.705109599961,174.66078746668,174.623012999722,174.711288199763,174.794672150245,174.867167799271,174.846312016586,174.938811199179,174.989772533759,175.035492733743,175.136486700712,175.266658932695,175.371593716648,175.439643550552,175.473443566666,175.653222466794,175.690650115948,175.77010965014,175.764739183997,175.871636834195,176.022449299869,176.0823341834,176.211253483369,176.332762533486],"lat":[-40.6979007993168,-40.7848635999896,-40.9064747167747,-40.9481505494893,-41.015220899261,-41.1310157497801,-41.1717069160291,-41.2447749000527,-41.2632956998994,-41.359626999291,-41.4137952330452,-41.4873728326723,-41.4965452334319,-41.5688357168968,-41.6059589661651,-41.6051656500414,-41.5238026326864,-41.4315767334039,-41.3733172995629,-41.4347028666894,-41.3594841327896,-41.259709699891,-41.2288581497332,-41.2651837993373,-41.3252582662544,-41.3571104667103,-41.3403752330376,-41.2603256333459,-41.219934017264,-41.124690299725,-41.0867387663858,-41.0499113660342,-41.000301466556,-40.8786943168829,-40.8516626997137,-40.7003334997973,-40.7686105330731,-40.7268607829925,-40.7441521327034,-40.6933970997204,-40.7424894826732,-40.6965623329528,-40.6988883998071,-40.7680905666746,-40.7779047333065,-40.7114886668177,-40.7081527159945,-40.659210282768,-40.6979007993168]}]],[[{"lng":[172.479030949819,172.444256900204,172.348260516017,172.235513800302,172.1330007499,172.094375383646,171.974953333456,171.915639166648,171.841774433461,171.763848766853,171.746369750712,171.69066966728,171.44922653414,171.411630450039,171.316264849941,171.237669015979,171.197689267427,171.079330766508,170.993271149153,170.937214367317,170.830348166594,170.70569891615,170.592312017226,170.528889117364,170.395291850712,170.32286143405,170.23842121714,170.098131417276,170.091407749956,169.965530866422,169.90003478334,169.699336634174,169.592780550647,169.591375933139,169.37295708232,169.275178699696,169.188798133344,169.147102432497,168.975078451222,168.963356499608,168.849166000645,168.836083533033,168.728392349424,168.625502800125,168.460041532958,168.334527917476,168.407363599041,168.349075433281,168.347349199204,168.224958950513,168.131928965928,168.052080299808,168.245224000369,168.327532100509,168.386086599287,168.512572866295,168.59603308294,168.709528882891,168.815458849998,168.888444333017,168.969334415799,169.209384000748,169.426815166877,169.591670650551,169.690794066995,169.793601633191,169.981233500258,170.050894783885,170.26610145036,170.257309000666,170.34165461676,170.420541400347,170.524388600502,170.720963766414,170.867846066505,170.947971800697,171.051014333038,171.167346766778,171.218172099769,171.304561750154,171.321142133862,171.417931516559,171.455980199127,171.462321733036,171.587717983286,171.670754701712,171.828431383484,171.882088466121,171.987652299441,172.063382449494,172.092597800296,172.111628817585,172.094501582949,172.133988150577,172.217804650849,172.229036100221,172.370078216958,172.310335033614,172.493938299216,172.485968450507,172.618004983595,172.657937583202,172.600312034113,172.584361567504,172.46311268413,172.418018282578,172.34245996745,172.320665484129,172.238130649319,172.247078967484,172.129322299744,172.115730567145,172.052126816993,172.135203666157,172.206730749948,172.26099479982,172.331950216583,172.335875833233,172.369593532568,172.479030949819],"lat":[-42.2770294330973,-42.3659640998669,-42.3913898493633,-42.4567272663168,-42.5552061664139,-42.6204476501481,-42.6389925162904,-42.6817304496134,-42.7745563165321,-42.7917224165001,-42.8740807000281,-42.9008274327434,-42.9092283835179,-42.9507592166428,-42.9474959831847,-43.0025114832403,-43.0742574837236,-43.1023006501349,-43.2153140831952,-43.2040572826411,-43.2835111333203,-43.3207865163813,-43.4340141666261,-43.4103522167365,-43.4980506000427,-43.4903493000688,-43.5138270161525,-43.5954793832756,-43.6603731667768,-43.7917623165151,-43.8129979661406,-43.9635462830298,-43.9580761661512,-44.0125360167186,-44.1169906665293,-44.0985810000811,-44.1105468990999,-44.0802167656571,-44.1440294836209,-44.1999363326238,-44.2466723492225,-44.3399177497125,-44.4194781165777,-44.4339354660492,-44.4953348155298,-44.4967794321351,-44.3751147821832,-44.3304823991759,-44.2842383160426,-44.256824249116,-44.2811937815188,-44.2586477653813,-44.158056415825,-44.0494656159258,-44.0035227657058,-44.0018953495409,-43.9725449323756,-43.9942465493971,-43.9674074832386,-43.9053743496898,-43.8784611496635,-43.7192993998752,-43.6253148328527,-43.5990183994978,-43.5430910165578,-43.4215250501236,-43.3578198495134,-43.2918990001713,-43.1725636158292,-43.118815349405,-43.0966792499658,-43.0361614328878,-43.0173943501588,-42.9301012999008,-42.8228048660163,-42.7232656999317,-42.650688316626,-42.5078089999748,-42.381019766233,-42.2672141667491,-42.1532471998875,-41.9177566328862,-41.8824885829382,-41.7497772332867,-41.7299331833162,-41.7398889758282,-41.6470442500116,-41.6006758828465,-41.4457266661726,-41.3840702160756,-41.282779150182,-41.0257784662432,-40.916250083059,-40.850621782872,-40.7745427669185,-40.8558806664281,-40.9707524671654,-41.0135581163012,-41.0245242002173,-41.0542427327216,-41.1598956494134,-41.239168999544,-41.3018332326605,-41.3761944999689,-41.4043775665175,-41.4716592493225,-41.5131613498026,-41.6102873667673,-41.6395180999627,-41.6842177167088,-41.7140016329438,-41.8684047996669,-41.9451821329784,-42.1040439833797,-42.0983147832165,-42.1483124834312,-42.1506392829313,-42.2342079660356,-42.2806025168152,-42.2770294330973]}]],[[{"lng":[174.048786900106,173.966599600681,173.892544684064,173.697996616623,173.671647083024,173.594467415865,173.509134350058,173.479398800221,173.368425849937,173.241651783235,173.14498353365,173.080542450878,172.816906899328,172.73369503355,172.704087800548,172.71511108423,172.776007199763,173.040053516148,173.102133650692,173.130149783874,173.100509666792,172.997729132882,172.836626966534,172.728520416444,172.587602799177,172.31661868302,172.028047117075,171.614830016684,171.439070166985,171.333436083013,171.244871200256,171.258240632397,171.195791149222,171.159184499413,171.167954350424,171.144153632672,170.882433150378,170.658825416631,170.636873433878,170.542436216334,170.447188600346,170.397211283579,170.349440716735,170.373258400944,170.319353066232,170.242072667457,170.094098767271,169.996618083497,169.944216317567,169.836191183419,169.757151799335,169.64421074906,169.633685649884,169.545884367477,169.57710081663,169.571069933865,169.717037416418,169.699336634174,169.90003478334,169.965530866422,170.091407749956,170.098131417276,170.23842121714,170.32286143405,170.395291850712,170.528889117364,170.592312017226,170.70569891615,170.830348166594,170.937214367317,170.993271149153,171.079330766508,171.197689267427,171.237669015979,171.316264849941,171.411630450039,171.44922653414,171.69066966728,171.746369750712,171.763848766853,171.841774433461,171.915639166648,171.974953333456,172.094375383646,172.1330007499,172.235513800302,172.348260516017,172.444256900204,172.479030949819,172.614713433524,172.639183050117,172.721472999322,172.7216385824,172.823290099099,172.84243633332,172.914144833248,172.94139345023,172.992906316788,173.035789000756,173.189895532864,173.24452471748,173.312201366903,173.464463350147,173.499107499943,173.720210166329,173.744379950814,173.817253667021,173.955504883873,174.048786900106],"lat":[-41.9681092162602,-42.0447000162179,-42.1892206160492,-42.351055932752,-42.4129525826766,-42.4284450167963,-42.5056333005085,-42.5927161833235,-42.7988198827098,-42.9528653661342,-42.9864308666799,-43.0507309163767,-43.1332584499924,-43.2550360161747,-43.3903552166591,-43.5479150830848,-43.5827193327987,-43.6552001167613,-43.6956743333843,-43.7627759999547,-43.8318133828848,-43.8873741827115,-43.889760282991,-43.8276729498285,-43.833265216244,-43.8670884165103,-43.9583162998763,-44.1318285168766,-44.2233021661649,-44.295190716563,-44.3817173993977,-44.4457059831022,-44.5267523667591,-44.627834699927,-44.8761730664257,-44.9403990326591,-44.891009399824,-44.9092402835359,-44.9513015836188,-44.9850467672132,-45.0659566666071,-45.0809043667793,-45.0216976998576,-44.9527760160294,-44.9030489828245,-44.9307172500278,-44.9400199334535,-44.8215735833956,-44.6539842168145,-44.6688994160923,-44.6121328159957,-44.5858154997107,-44.4624052998829,-44.4226623995998,-44.3456657831464,-44.1772291499773,-44.0382773159809,-43.9635462830298,-43.8129979661406,-43.7917623165151,-43.6603731667768,-43.5954793832756,-43.5138270161525,-43.4903493000688,-43.4980506000427,-43.4103522167365,-43.4340141666261,-43.3207865163813,-43.2835111333203,-43.2040572826411,-43.2153140831952,-43.1023006501349,-43.0742574837236,-43.0025114832403,-42.9474959831847,-42.9507592166428,-42.9092283835179,-42.9008274327434,-42.8740807000281,-42.7917224165001,-42.7745563165321,-42.6817304496134,-42.6389925162904,-42.6204476501481,-42.5552061664139,-42.4567272663168,-42.3913898493633,-42.3659640998669,-42.2770294330973,-42.1954626498809,-42.1007946829437,-42.1034917994101,-42.1586981838795,-42.2047070167512,-42.2891840664509,-42.3086089000751,-42.3778250335143,-42.403849533931,-42.4834705328707,-42.4105463995019,-42.3031041161546,-42.2503815996964,-42.1956736999014,-42.0787366833871,-41.9607712162466,-41.9073832665075,-41.9329969833512,-41.9126783171065,-41.9681092162602]}]],[[{"lng":[169.699336634174,169.717037416418,169.571069933865,169.57710081663,169.545884367477,169.633685649884,169.64421074906,169.757151799335,169.836191183419,169.944216317567,169.996618083497,170.094098767271,170.242072667457,170.319353066232,170.373258400944,170.349440716735,170.397211283579,170.447188600346,170.542436216334,170.636873433878,170.658825416631,170.882433150378,171.144153632672,171.100528099082,170.973751149775,170.904456867088,170.831473232453,170.831145883379,170.75579789982,170.725243549953,170.653058832419,170.600894433298,170.658593699998,170.663784716406,170.511765316615,170.297526650458,170.196885316546,170.168560666665,169.923941867019,169.79808831661,169.797051965838,169.587586633505,169.47711816663,169.404843300523,169.279166266453,169.200940883195,169.250660233525,169.172959832967,169.195997516664,169.134143867521,169.190826583093,169.198060700805,169.159619899699,169.153328134266,169.067252783316,169.091515616612,169.005199499322,168.993372050566,169.129045084135,169.140231617244,169.211048582457,169.099293033043,169.065469000311,168.959565366312,168.886900132632,168.782457032387,168.75163494987,168.69221520076,168.674105117547,168.539401383191,168.323294050019,168.300759133521,168.217006499085,168.284206182761,168.292267949593,168.133993850181,168.117214416596,168.191001933458,168.172333383406,168.234509800005,168.334527917476,168.460041532958,168.625502800125,168.728392349424,168.836083533033,168.849166000645,168.963356499608,168.975078451222,169.147102432497,169.188798133344,169.275178699696,169.37295708232,169.591375933139,169.592780550647,169.699336634174],"lat":[-43.9635462830298,-44.0382773159809,-44.1772291499773,-44.3456657831464,-44.4226623995998,-44.4624052998829,-44.5858154997107,-44.6121328159957,-44.6688994160923,-44.6539842168145,-44.8215735833956,-44.9400199334535,-44.9307172500278,-44.9030489828245,-44.9527760160294,-45.0216976998576,-45.0809043667793,-45.0659566666071,-44.9850467672132,-44.9513015836188,-44.9092402835359,-44.891009399824,-44.9403990326591,-45.0030083668204,-45.0991354496319,-45.1744155169177,-45.3055600328457,-45.4735115163131,-45.533487850182,-45.5959489167521,-45.6310545499492,-45.7107696833387,-45.7588499501258,-45.9035087330227,-45.9091708334692,-45.9623933001436,-46.0625319333419,-46.1545419164646,-46.2983543337638,-46.3546976164324,-46.4513536993082,-46.5657448492693,-46.5613084166797,-46.6123262493729,-46.6224137665975,-46.5607098326622,-46.5143265831323,-46.4861186661636,-46.4044065824797,-46.3754392329164,-46.3264038991747,-46.2126295490888,-46.1756371497824,-46.0487447159179,-45.9804276161464,-45.8825561162821,-45.8634921996335,-45.7285384164748,-45.5203341824305,-45.4652520827241,-45.4167719991232,-45.319945749245,-45.269609899731,-45.3591220827466,-45.4628204656639,-45.4370390829242,-45.3675663491687,-45.3396697495697,-45.2430717491471,-45.3093267162083,-45.327543165947,-45.2246531159516,-45.1445409488356,-45.1061745325468,-45.0438246323005,-44.9414410656498,-44.8714499484676,-44.7667900988546,-44.7045591824468,-44.543195698814,-44.4967794321351,-44.4953348155298,-44.4339354660492,-44.4194781165777,-44.3399177497125,-44.2466723492225,-44.1999363326238,-44.1440294836209,-44.0802167656571,-44.1105468990999,-44.0985810000811,-44.1169906665293,-44.0125360167186,-43.9580761661512,-43.9635462830298]}]],[[{"lng":[168.334527917476,168.234509800005,168.172333383406,168.191001933458,168.117214416596,168.133993850181,168.292267949593,168.284206182761,168.217006499085,168.300759133521,168.323294050019,168.539401383191,168.674105117547,168.69221520076,168.75163494987,168.782457032387,168.886900132632,168.959565366312,169.065469000311,169.099293033043,169.211048582457,169.140231617244,169.129045084135,168.993372050566,169.005199499322,169.091515616612,169.067252783316,169.153328134266,169.159619899699,169.198060700805,169.190826583093,169.134143867521,169.195997516664,169.172959832967,169.250660233525,169.200940883195,169.279166266453,169.220365916036,169.112977633974,169.005877783165,168.847240616748,168.793966399727,168.602963450817,168.515573883457,168.352956367785,168.265940500354,168.263609712926,168.190226400186,168.064940999915,168.015834933966,167.93185776713,167.783985416635,167.697388534619,167.712351200166,167.611463133841,167.533283266975,167.403100267612,167.360417901081,167.21721350111,167.105668635801,166.852483269489,166.778670303253,166.657467519732,166.618782638105,166.68276642128,166.698540019365,166.615138537561,166.611146487314,166.555778437685,166.449630289541,166.426302922672,166.450324487655,166.518401055545,166.622173086985,166.804038752399,166.730721587317,166.751807818911,166.731030037295,166.671602286539,166.684135137044,166.844406784828,166.908979302292,167.007590901768,166.967797184775,167.002267434006,167.271321767837,167.500637450702,167.571723434454,167.751370433439,167.817211300363,167.827906550695,167.872684933483,167.973286216925,168.008558300361,168.097524283348,168.052080299808,168.131928965928,168.224958950513,168.347349199204,168.349075433281,168.407363599041,168.334527917476],"lat":[-44.4967794321351,-44.543195698814,-44.7045591824468,-44.7667900988546,-44.8714499484676,-44.9414410656498,-45.0438246323005,-45.1061745325468,-45.1445409488356,-45.2246531159516,-45.327543165947,-45.3093267162083,-45.2430717491471,-45.3396697495697,-45.3675663491687,-45.4370390829242,-45.4628204656639,-45.3591220827466,-45.269609899731,-45.319945749245,-45.4167719991232,-45.4652520827241,-45.5203341824305,-45.7285384164748,-45.8634921996335,-45.8825561162821,-45.9804276161464,-46.0487447159179,-46.1756371497824,-46.2126295490888,-46.3264038991747,-46.3754392329164,-46.4044065824797,-46.4861186661636,-46.5143265831323,-46.5607098326622,-46.6224137665975,-46.6562230996031,-46.6445697995773,-46.6743386327922,-46.6586199324697,-46.581126249587,-46.5519047491435,-46.5742984494303,-46.536278198365,-46.5559335316574,-46.4953184330149,-46.3853629156488,-46.3392979653123,-46.3838269816428,-46.3581014984449,-46.3890891153421,-46.3079614649503,-46.2576959484531,-46.1914227639541,-46.1624094643935,-46.1520754139566,-46.2369483973937,-46.2625064636042,-46.2536611290707,-46.208479478094,-46.2220721780732,-46.2022869439588,-46.1487916607235,-46.1155054774682,-46.0582340943939,-46.0600605774594,-45.9997223441552,-45.974646443428,-45.9949010433078,-45.9044508925509,-45.8189640767231,-45.7943900103485,-45.7910534108493,-45.7598318118677,-45.7281351117593,-45.6676932449173,-45.5947802620528,-45.5749929274641,-45.5132728112309,-45.2758819118717,-45.3074377122482,-45.3141696626352,-45.1937010798687,-45.1255542132859,-44.8704800972672,-44.748057897824,-44.6858730808973,-44.5806611478559,-44.5991209981649,-44.5075593480495,-44.4342743651316,-44.3866309813592,-44.3250568982168,-44.3271642985448,-44.2586477653813,-44.2811937815188,-44.256824249116,-44.2842383160426,-44.3304823991759,-44.3751147821832,-44.4967794321351]}],[{"lng":[167.869696717385,167.976547566978,168.001210732732,168.141792199565,168.141009318344,168.031908184531,167.978834600349,168.150523284284,168.21466859946,168.156390867238,167.954351351045,167.825699752283,167.710747199939,167.636122350701,167.64603149998,167.466622085851,167.466427318386,167.575995201712,167.579121551345,167.64975053312,167.694039967428,167.759027316278,167.756471367387,167.704121801107,167.754640633164,167.869696717385],"lat":[-46.6842310150475,-46.7237613973466,-46.7857626640377,-46.8618585317734,-46.9094082979053,-46.89688748132,-46.9288782319926,-46.9664681167307,-46.9944344827427,-47.1041435150793,-47.1292745634624,-47.191379982114,-47.1604565144884,-47.2102895310388,-47.2637216303122,-47.2828524134173,-47.2165166300209,-47.166243313737,-47.085338897629,-47.0364652468971,-46.9670829976916,-46.9370851803384,-46.8609822636435,-46.7544420145734,-46.6946847146376,-46.6842310150475]}],[{"lng":[166.678832287015,166.716482704067,166.723640187457,166.684653836759,166.588378970674,166.53680382096,166.678832287015],"lat":[-45.6003755947174,-45.6245835280225,-45.699235444444,-45.748173577695,-45.7207469609017,-45.6343713934598,-45.6003755947174]}],[{"lng":[166.962425851921,166.949393052829,166.987792335244,166.947416384981,166.868999985619,166.962425851921],"lat":[-45.1477982791214,-45.2031774956885,-45.2585408461444,-45.2941630622485,-45.2405394789924,-45.1477982791214]}]],[[{"lng":[173.198887399729,173.297443983366,173.250831384127,173.304149350489,173.168700533592,173.151614666983,173.086652616993,173.003789650797,172.926235200656,172.847570550194,172.86109313253,172.735298849099,172.721472999322,172.639183050117,172.614713433524,172.479030949819,172.369593532568,172.335875833233,172.331950216583,172.26099479982,172.206730749948,172.135203666157,172.052126816993,172.115730567145,172.129322299744,172.247078967484,172.238130649319,172.320665484129,172.34245996745,172.418018282578,172.46311268413,172.584361567504,172.600312034113,172.657937583202,172.618004983595,172.485968450507,172.493938299216,172.310335033614,172.370078216958,172.229036100221,172.217804650849,172.292207984059,172.447285383514,172.60562558292,172.642595651343,172.728820134899,172.688014218755,172.692504033943,172.798009667228,172.886338016923,172.990330217499,173.063517816826,173.012366349789,173.033520217139,173.009530717519,173.06578501716,173.104255083169,173.198887399729],"lat":[-41.3306196997753,-41.3931415162802,-41.4665801165558,-41.5060320835981,-41.5311546995304,-41.5854709831784,-41.6249252333668,-41.7248032669424,-41.7577336161519,-41.8742874663461,-41.9224629661687,-42.0578953163025,-42.1034917994101,-42.1007946829437,-42.1954626498809,-42.2770294330973,-42.2806025168152,-42.2342079660356,-42.1506392829313,-42.1483124834312,-42.0983147832165,-42.1040439833797,-41.9451821329784,-41.8684047996669,-41.7140016329438,-41.6842177167088,-41.6395180999627,-41.6102873667673,-41.5131613498026,-41.4716592493225,-41.4043775665175,-41.3761944999689,-41.3018332326605,-41.239168999544,-41.1598956494134,-41.0542427327216,-41.0245242002173,-41.0135581163012,-40.9707524671654,-40.8558806664281,-40.7745427669185,-40.7473438326411,-40.6295302334237,-40.5644542999212,-40.5081192334808,-40.5290822657801,-40.5827790489934,-40.7278832002206,-40.8162795663909,-40.8323796326954,-40.7811902663483,-40.9057494657357,-40.9921395165831,-41.0887589498798,-41.1437780995614,-41.1838260998815,-41.29015973291,-41.3306196997753]}]],[[{"lng":[173.297443983366,173.198887399729,173.221776466012,173.310618882688,173.32361723313,173.412776467452,173.461631133591,173.593891449768,173.568365816496,173.523007850712,173.415419299657,173.40678916666,173.297443983366],"lat":[-41.3931415162802,-41.3306196997753,-41.2930119000069,-41.2507582163535,-41.2037450165907,-41.1494512164136,-41.1668533163242,-41.0511199330305,-41.1897309661611,-41.1979918667477,-41.2891416995037,-41.3309583501746,-41.3931415162802]}]],[[{"lng":[174.048786900106,173.955504883873,173.817253667021,173.744379950814,173.720210166329,173.499107499943,173.464463350147,173.312201366903,173.24452471748,173.189895532864,173.035789000756,172.992906316788,172.94139345023,172.914144833248,172.84243633332,172.823290099099,172.7216385824,172.721472999322,172.735298849099,172.86109313253,172.847570550194,172.926235200656,173.003789650797,173.086652616993,173.151614666983,173.168700533592,173.304149350489,173.250831384127,173.297443983366,173.40678916666,173.415419299657,173.523007850712,173.568365816496,173.593891449768,173.673303050289,173.802376834404,173.85077169915,173.868127116147,173.93680894915,173.993088400438,174.079004183599,174.17580193353,174.219448550258,174.12449421688,174.133062266944,174.048447900196,174.033535683903,174.072046116608,174.150420350879,174.15696061672,174.198299267036,174.275035250512,174.196758333519,174.048786900106],"lat":[-41.9681092162602,-41.9126783171065,-41.9329969833512,-41.9073832665075,-41.9607712162466,-42.0787366833871,-42.1956736999014,-42.2503815996964,-42.3031041161546,-42.4105463995019,-42.4834705328707,-42.403849533931,-42.3778250335143,-42.3086089000751,-42.2891840664509,-42.2047070167512,-42.1586981838795,-42.1034917994101,-42.0578953163025,-41.9224629661687,-41.8742874663461,-41.7577336161519,-41.7248032669424,-41.6249252333668,-41.5854709831784,-41.5311546995304,-41.5060320835981,-41.4665801165558,-41.3931415162802,-41.3309583501746,-41.2891416995037,-41.1979918667477,-41.1897309661611,-41.0511199330305,-41.0342675989878,-40.972247532291,-41.022320383094,-41.1442067667604,-41.0834601826331,-41.1021083834367,-41.0162762162912,-40.9990567827089,-41.0713428828236,-41.2362538666885,-41.2853295661851,-41.3931097327546,-41.4763469339435,-41.5239591995602,-41.5594337667488,-41.647669716411,-41.7232352500773,-41.7428873668553,-41.8356043168166,-41.9681092162602]}],[{"lng":[173.956358883868,173.960139751383,173.905318948269,173.813983967132,173.772206384171,173.805729534265,173.93662750116,173.956358883868],"lat":[-40.6928282325857,-40.7644749495513,-40.8572309998704,-40.9304674331604,-40.8619594325105,-40.8027343164386,-40.7475060664494,-40.6928282325857]}]]],null,"nz",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>1&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Northland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>12500.5611491&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>175500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>23400&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.942453228842534&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>2&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Auckland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>4941.5725565&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>1657200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29600&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.944285802583596&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>3&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Waikato&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>23900.0363831&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>460100&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.952050024664133&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>4&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Bay of Plenty&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>12071.1446886&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>299900&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26200&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.928039058955691&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>5&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Gisborne&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>8385.8266186&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>48500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>24400&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.934973404255319&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>6&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Hawke's Bay&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>14137.5244406&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>164000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.923837520042758&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>7&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Taranaki&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>7254.4804331&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>118000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.956936261381896&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>8&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Manawatu-Wanganui&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>22220.6083872&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>234500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>25000&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.938773377912444&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>9&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Wellington&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>8048.5527716&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>513900&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>32700&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.93355240486388&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>10&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>West Coast&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>23245.45588&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>32400&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>1.01390716030821&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>11&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Canterbury&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>44504.4990912&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>612000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>30100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.975326544288084&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>12&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Otago&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>31186.3091885&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>224200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26300&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.951169446933996&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>13&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Southland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>31196.0603552&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>98300&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29500&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.978506931196744&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>14&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Tasman&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>9615.9760349&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>51100&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>25700&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.971898130723874&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>15&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Nelson&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>422.195242&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>51400&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27200&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.925967400771432&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>16&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Marlborough&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>10457.7454853&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>46200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.957792207792208&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":2,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[166.426302922672,-47.2828524134173,178.550373600413,-34.4145187168343,"Zoom to nz","<strong> nz <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"nz",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[-47.2828524134173,-34.4145187168343],"lng":[166.426302922672,178.550373600413]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n\n        // get the leaflet map\n        var map = this; //HTMLWidgets.find('#' + el.id);\n\n        // we need a new div element because we have to handle\n        // the mouseover output separately\n        // debugger;\n        function addElement () {\n          // generate new div Element\n         var newDiv = $(document.createElement('div'));\n          // append at end of leaflet htmlwidget container\n          $(el).append(newDiv);\n          //provide ID and style\n          newDiv.addClass('lnlt');\n          newDiv.css({\n            'position': 'relative',\n            'bottomleft':  '0px',\n            'background-color': 'rgba(255, 255, 255, 0.7)',\n            'box-shadow': '0 0 2px #bbb',\n            'background-clip': 'padding-box',\n            'margin': '0',\n            'padding-left': '5px',\n            'color': '#333',\n            'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n            'z-index': '700',\n          });\n          return newDiv;\n        }\n\n        // check for already existing lnlt class to not duplicate\n        var lnlt = $(el).find('.lnlt');\n\n        if(!lnlt.length) {\n          lnlt = addElement();\n          //$(el).keypress(function (e) {\n          //  if (e.which == 32 || event.keyCode == 32) {\n          //    alert('space key is pressed');\n          //  }\n          //});\n          // grab the special div we generated in the beginning\n          // and put the mousmove output there\n          map.on('mousemove', function (e) {\n            lnlt.text(\n                           ' x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ' +\n                           ' | lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() + ' ');\n          });\n        };\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>

---

# Web mapping applications

- Leaflet integrates with **shiny** via `leaflet::leafletOutput()`, enabling web mapping applications built on R
- These can be set-up to scale nationally, as illustrated by [pct.bike](http://www.pct.bike/)
(Lovelace, Goodman, Aldred, Berkoff, Abbas, and Woodcock, 2017).


![](https://raw.githubusercontent.com/npct/pct-team/master/figures/pct-frontpage.png)&lt;!-- --&gt;

---

# Exercises

1. Create a map showing the geographic distribution of the Human Development Index (`HDI`) across Africa with 
-base graphics (hint: use `plot()`) and
-**tmap** (hint: use `tm_shape(africa) + ...`).
    - Name two advantages of each approach
    - Bonus: What three other mapping packages could be used to show the same data?
    
--

## Starting point for the exercise:


```r
library(sf)
library(spData)
library(tidyverse)
africa = world %&gt;% 
  filter(continent == "Africa", !is.na(iso_a2)) %&gt;% 
  left_join(worldbank_df, by = "iso_a2") %&gt;% 
  select(name, subregion, gdpPercap, HDI, pop_growth) %&gt;% 
  st_transform("+proj=aea +lat_1=20 +lat_2=-23 +lat_0=0 +lon_0=25")
```

---

class: small
# References

Bivand, Roger S, Edzer Pebesma and Virgilio GÃ³mez-Rubio (2013).
_Applied Spatial Data Analysis with R_. 2nd ed. 2013 edition. New
York: Springer. 405 pp. ISBN: 978-1-4614-7617-7.

Cheng, Joe, Bhaskar Karambelkar and Yihui Xie (2018). _Leaflet:
Create Interactive Web Maps with the JavaScript 'Leaflet'
Library_. R package version 2.0.0. URL:
[https://CRAN.R-project.org/package=leaflet](https://CRAN.R-project.org/package=leaflet).

Lovelace, Robin, Anna Goodman, Rachel Aldred, et al. (2017). "The
Propensity to Cycle Tool: An Open Source Online System for
Sustainable Transport Planning". In: _Journal of Transport and
Land Use_ 10.1. ISSN: 1938-7849. DOI:
[10.5198/jtlu.2016.862](https://doi.org/10.5198/jtlu.2016.862).
URL:
[https://www.jtlu.org/index.php/jtlu/article/view/862](https://www.jtlu.org/index.php/jtlu/article/view/862)
(visited on Jun. 01, 2017).

Lovelace, Robin, Jakub Nowosad and Jannes Meunchow (2018).
_Geocomputation with R_. CRC Press. URL:
[http://robinlovelace.net/geocompr](http://robinlovelace.net/geocompr)
(visited on Oct. 05, 2017).

Murrell, Paul (2016). _R Graphics, Second Edition_. CRC Press. 536
pp. ISBN: 978-1-4398-3177-9. Google Books: googlebooks.

Talbert, Richard J. A. (2014). _Ancient Perspectives: Maps and
Their Place in Mesopotamia, Egypt, Greece, and Rome_. University
of Chicago Press. 284 pp. ISBN: 978-0-226-78940-8. Google Books:
googlebooks.

Tennekes, Martijn (2018). "Tmap: Thematic Maps in R". In: _Journal
of Statistical Software, Articles_ 84.6, pp. 1-39. ISSN:
1548-7660. DOI:
[10.18637/jss.v084.i06](https://doi.org/10.18637/jss.v084.i06).
URL:
[https://www.jstatsoft.org/v084/i06](https://www.jstatsoft.org/v084/i06).
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"ratio": "4:3",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
